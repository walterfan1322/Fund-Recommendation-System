# Streamlit 推薦系統 UI 使用指南

## 🚀 啟動應用

在命令列執行（確保使用虛擬環境）：
```bash
# Windows (推薦)
.\.venv\Scripts\python.exe -m streamlit run recsys_app.py

# 或者如果已經激活虛擬環境
streamlit run recsys_app.py
```

應用會自動在瀏覽器開啟（通常是 `http://localhost:8501`）

## 📋 使用流程（5步驟）

### 步驟 1: 設定投資檔案（左側欄）
在左側邊欄輸入您的個人資訊：
- 📅 **年齡**: 拖曳滑桿選擇（18-80歲）
- 💰 **年收入**: 選擇收入範圍（萬元）
- 🎯 **風險偏好**: 
  - 保守 (Conservative)
  - 穩健 (Moderate) 
  - 積極 (Aggressive)
- 🎓 **投資目標**:
  - 資產增值 (Growth)
  - 退休規劃 (Retirement)
  - 儲蓄保本 (Savings)
- 📚 **投資經驗**:
  - 新手 (Novice)
  - 普通 (Average)
  - 專家 (Expert)

### 步驟 2: 下載市場數據
點擊 **"🔄 下載最新市場數據 (Yahoo Finance)"** 按鈕

**這會做什麼？**
- 從 Yahoo Finance 抓取 25+ 支標的（美股ETF、科技股、台股等）
- 下載過去一年的歷史價格
- 自動計算年化報酬、波動率、夏普比率等指標
- **等待時間**: 約 5-10 秒

**包含的資產範例**:
- 🇺🇸 ETF: SPY, QQQ, IWM, VTI
- 🇺🇸 科技股: AAPL, MSFT, NVDA, GOOGL, TSLA
- 🇺🇸 金融股: JPM, BAC, V, MA
- 🇹🇼 台股: 0050.TW, 0056.TW, 2330.TW

### 步驟 3: 選擇您感興趣的標的
在 **"❤️ 選擇您感興趣或持有的標的"** 下拉選單中：
- 勾選您過去買過或關注的標的（至少選 1 個）
- 這些選擇會告訴模型您的偏好

**範例**:
- 如果選擇 AAPL, NVDA → 模型會學到您喜歡科技股
- 如果選擇 SPY, VTI → 模型會學到您偏好大盤指數

### 步驟 4: 訓練個人化模型
點擊 **"🚀 開始訓練模型"** 按鈕

**這會做什麼？**
- 使用雙塔深度學習模型（Dual-Tower）
- 結合您的個人檔案 + 您的喜好標的
- 訓練 10 個 epochs（約 10-30 秒）
- 訓練過程會顯示每個 epoch 的 Loss

**注意**: 
- ⚠️ 如果沒有選擇任何標的，會提示警告
- ✅ 訓練完成後會顯示 "模型訓練完成！"

### 步驟 5: 查看推薦結果
訓練完成後，會自動顯示：

#### Top-5 推薦卡片
每個推薦會顯示：
- 📊 **標的代號** (如 NVDA)
- 🎯 **匹配分數** (0-1，越高越匹配)
- 💡 **推薦理由** (如 "高夏普比率"、"匹配風險偏好")
- 📈 **年化報酬率**
- ⚡ **夏普比率**

#### 視覺化圖表
兩個分頁：
1. **風險-報酬分析**: 
   - 散佈圖顯示所有資產的風險vs報酬
   - 紅點標示推薦的 5 支
2. **歷史走勢比較**:
   - 折線圖顯示推薦標的的價格走勢（正規化）

## 💡 使用技巧

### 實驗不同設定
您可以：
1. 修改左側檔案（如改成「保守」風險）
2. 選擇不同的喜好標的
3. 重新點「訓練模型」
4. 比較推薦結果的變化

### 解讀結果
- **匹配分數高** → 該標的與您的檔案+偏好高度一致
- **推薦理由** → 解釋為何推薦（基於規則）
- **風險-報酬圖** → 幫助您視覺化風險分散

## ❓ 常見問題

**Q: 為什麼推薦結果看起來隨機？**  
A: 如果只選 1-2 個喜好標的，資料太少。建議選 3-5 個以上。

**Q: 可以加入其他標的嗎？**  
A: 目前版本使用預設的 25 支。如需自訂，可修改 `data_loader.py` 中的 `default_tickers`。

**Q: 訓練需要多久？**  
A: 通常 10-30 秒。如果資料量很大可能更久。

**Q: 推薦結果會改變嗎？**  
A: 會。每次重新訓練都會有些微差異（因為隨機初始化和負樣本採樣）。

## 🎯 範例使用情境

### 情境 1: 積極型科技投資人
1. 設定: 年齡 30, 積極風險, 資產增值目標
2. 喜好: AAPL, NVDA, TSLA
3. 結果: 推薦其他高成長科技股（如 AMD, META）

### 情境 2: 保守型退休規劃
1. 設定: 年齡 60, 保守風險, 退休規劃目標
2. 喜好: SPY, VTI, 0050.TW
3. 結果: 推薦低波動 ETF 和穩健股票

### 情境 3: 台股投資人
1. 設定: 穩健風險
2. 喜好: 2330.TW, 0050.TW
3. 結果: 推薦其他台股（2317.TW, 2454.TW）
